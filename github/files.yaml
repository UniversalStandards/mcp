paths:
  files:
    get:
      operationId: getFileContent
      summary: Get file or directory content
      parameters:
        - {name: owner, in: path, required: true, schema: {type: string}}
        - {name: repo, in: path, required: true, schema: {type: string}}
        - {name: path, in: path, required: true, schema: {type: string}}
        - {name: ref, in: query, schema: {type: string, description: "Branch/tag/commit SHA"}}
      responses:
        '200':
          description: File content retrieved
          content:
            application/json:
              schema:
                oneOf:
                  - $ref: 'https://raw.githubusercontent.com/UniversalStandards/mcp/main/github/schemas.yaml#/components/schemas/File'
                  - type: array
                    items:
                      $ref: 'https://raw.githubusercontent.com/UniversalStandards/mcp/main/github/schemas.yaml#/components/schemas/File'
        '404':
          description: File not found
    
    put:
      operationId: createOrUpdateFile
      summary: Create or update file
      parameters:
        - {name: owner, in: path, required: true, schema: {type: string}}
        - {name: repo, in: path, required: true, schema: {type: string}}
        - {name: path, in: path, required: true, schema: {type: string}}
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [message, content]
              properties:
                message: {type: string, description: "Commit message"}
                content: {type: string, description: "Base64-encoded file content"}
                sha: {type: string, description: "Required for updates - blob SHA of existing file"}
                branch: {type: string, description: "Branch name"}
                committer:
                  type: object
                  properties:
                    name: {type: string}
                    email: {type: string}
                author:
                  type: object  
                  properties:
                    name: {type: string}
                    email: {type: string}
      responses:
        '200':
          description: File updated
          content:
            application/json:
              schema:
                type: object
                properties:
                  content:
                    $ref: 'https://raw.githubusercontent.com/UniversalStandards/mcp/main/github/schemas.yaml#/components/schemas/File'
                  commit: {type: object}
        '201':
          description: File created
          content:
            application/json:
              schema:
                type: object
                properties:
                  content:
                    $ref: 'https://raw.githubusercontent.com/UniversalStandards/mcp/main/github/schemas.yaml#/components/schemas/File'
                  commit: {type: object}
    
    delete:
      operationId: deleteFile
      summary: Delete file
      parameters:
        - {name: owner, in: path, required: true, schema: {type: string}}
        - {name: repo, in: path, required: true, schema: {type: string}}
        - {name: path, in: path, required: true, schema: {type: string}}
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [message, sha]
              properties:
                message: {type: string, description: "Commit message"}
                sha: {type: string, description: "Blob SHA of file to delete"}
                branch: {type: string, description: "Branch name"}
                committer:
                  type: object
                  properties:
                    name: {type: string}
                    email: {type: string}
                author:
                  type: object
                  properties:
                    name: {type: string}
                    email: {type: string}
      responses:
        '200':
          description: File deleted
          content:
            application/json:
              schema:
                type: object
                properties:
                  commit: {type: object}
        '404':
          description: File not found
